\usepackage[english]{babel}
\usepackage[usenames,dvipsnames]{color}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{cases}
\usepackage{url}
\usepackage{mathrsfs}
\usepackage{multirow}
\usepackage{booktabs}
\usepackage{rotating}
\usepackage{graphicx}
\usepackage[maxnames=5, sorting=none, defernumbers=true]{biblatex}
\usepackage{csquotes}
\usepackage{flushend}

\makeatletter
\let\l@ENGLISH\l@english
\makeatother

%
% Submission and revision
%
\usepackage{pdfpages}

\definecolor{updated}{rgb}{1,0,0}
\definecolor{updatedBackground}{rgb}{1,0.95,0.95}

\usepackage[normalem]{ulem}
\newcommand{\updated}[1]{{\color{updated}\uline{#1}}}

\newcommand{\updatedFigure}[1]{%
  \setlength{\fboxsep}{0pt}%
  \setlength{\fboxrule}{1pt}%
  \vspace*{-2pt}%
  \hspace*{-5pt}%
  \fcolorbox{updated}{updatedBackground}{#1}%
}

\AtEveryBibitem{%
  \iffieldequalstr{note}{updated}
  {%
    \clearfield{note}%
    \color{red}%
  }%
  {%
  }%
}

%
% Fonts
%
\newcommand*{\TitleFont}{%
  \fontsize{22}{26}%
  \selectfont%
}

\renewcommand*{\bibfont}{\small}

%
% References
%
\newcommand{\eref}[1]{Eq.~(\ref{equ:#1})}
\newcommand{\sref}[1]{Sec.~\ref{sec:#1}}
\newcommand{\aref}[1]{App.~\ref{app:#1}}
\newcommand{\tref}[1]{Tab.~\ref{tab:#1}}
\newcommand{\fref}[1]{Fig.~\ref{fig:#1}}

\newcommand{\elabel}[1]{\label{equ:#1}}
\newcommand{\slabel}[1]{\label{sec:#1}}
\newcommand{\alabel}[1]{\label{app:#1}}
\newcommand{\tlabel}[1]{\label{tab:#1}}
\newcommand{\flabel}[1]{\label{fig:#1}}

%
% Text shortcuts
%
\newcommand{\cdf}{CDF}
\newcommand{\cdfs}{CDFs}
\newcommand{\pdf}{PDF}
\newcommand{\pdfs}{PDFs}
\newcommand{\nrmse}{NRMSE}
\newcommand{\nrmses}{NRMSEs}

\newcommand{\ie}{\emph{i.e.}}
\newcommand{\eg}{\emph{e.g.}}
\newcommand{\etc}{\emph{etc.}}
\newcommand{\apriori}{\emph{a priori}}
\newcommand{\versus}{vs.}
\newcommand{\via}{via}
\newcommand{\etal}{\emph{et al.}}

\makeatletter
\def\stage#1{\@ifnextchar\bgroup{\stageDouble{#1}}{\stageSingle{#1}}}
\def\stageSingle#1{\textbf{Stage~#1}}
\def\stageDouble#1#2{\textbf{Stage~#1.}\hspace{0.5em}\emph{#2}}
\makeatother

%
% Tables
%
\usepackage{array}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\newcolumntype{=}{>{\global\let\currentrowstyle\relax}}
\newcolumntype{-}{>{\currentrowstyle}}
\newcommand{\rowstyle}[1]{\gdef\currentrowstyle{#1}%
  #1\ignorespaces
}

\newcommand{\eExp}{\epsilon_\mathbb{E}}
\newcommand{\eVar}{\epsilon_{\mathbb{V}\text{ar}}}
\newcommand{\ePDF}{\epsilon_\fPDF}

\newcommand{\colExp}{$\eExp, \%$}
\newcommand{\colVar}{$\eVar, \%$}
\newcommand{\colPDF}{$\ePDF, \%$}
\newcommand{\colMC}[1]{$\scriptstyle \nsamples = 10^#1$}

%
% Spaces
%
\renewcommand{\L}[1]{\mathcal{L}_{#1}}
\newcommand{\real}{\mathbb{R}}

%
% Linear algebra
%
\newcommand{\m}[1]{\mathbf{\MakeUppercase{#1}}}

\newcommand{\mI}{\m{I}}
\newcommand{\mZero}{\m{0}}

\renewcommand{\vec}[1]{\left(#1\right)^T}
\renewcommand{\v}[1]{\mathbf{#1}}

\newcommand{\vZero}{\v{0}}

\newcommand{\abs}[1]{| #1 |}
\newcommand{\norm}[1]{\| #1 \|}

%
% Probability theory
%
\newcommand{\outcomes}{\Omega}
\renewcommand{\o}{\omega}
\newcommand{\sAlgebra}{\mathcal{F}}
\newcommand{\pMeasure}{\mathbb{P}}

\newcommand{\dBeta}{\text{Beta}}

\newcommand{\vExp}{{\boldsymbol\mu}}
\newcommand{\mCov}{\m{\Sigma}}

\newcommand{\oExp}[1]{\mathbb{E}\left(#1\right)}
\newcommand{\oVar}[1]{\mathbb{V}\text{ar}\left(#1\right)}
\newcommand{\oCov}[1]{\mathbb{C}\text{ov}\left(#1\right)}
\newcommand{\oCorr}[1]{\mathbb{C}\text{orr}\left(#1\right)}

\newcommand{\SE}{\text{SE}}
\newcommand{\OU}{\text{OU}}

\newcommand{\fPDF}{f}
\newcommand{\fCDF}{F}

\newcommand{\oNataf}[1]{\mathcal{N}\left[#1\right]}
\newcommand{\oInvNataf}[1]{\mathcal{N}^{-1}\left[#1\right]}

\makeatletter
\def\fMean{\@ifnextchar\bgroup{\fMeanOne}{\fMeanZero}}
\def\fMeanOne#1{\mu(#1)}
\def\fMeanZero{\mu}

\def\fCov{\@ifnextchar\bgroup{\fCovOne}{\fCovZero}}
\def\fCovOne#1{k(#1)}
\def\fCovZero{k}

\def\fCorr{\@ifnextchar\bgroup{\fCorrOne}{\fCorrZero}}
\def\fCorrOne#1{k(#1)}
\def\fCorrZero{k}
\makeatother

%
% Polynomial chaos expansion
%
\newcommand{\pcb}{\Phi}
\newcommand{\pcn}{\eta}
\newcommand{\pcc}[1]{\hat{#1}}
\newcommand{\oPC}[3]{\mathcal{C}_{#1}^{#2}\left[#3\right]}

\makeatletter
\def\oInner#1{\@ifnextchar\bgroup{\oInnerDouble{#1}}{\oInnerSingle{#1}}}
\def\oInnerSingle#1{\left\langle #1 \right\rangle}
\def\oInnerDouble#1#2{\oInnerSingle{#1, #2}}
\makeatother

%
% Karhunen-Loeve expansion
%
\newcommand{\domain}{\mathcal{D}}
\newcommand{\klv}{\lambda}
\newcommand{\klf}[1]{\hat{#1}}
\newcommand{\mKL}{\m{K}}

%
% Integration with quadratures
%
\newcommand{\qdn}[1]{\hat{#1}}
\newcommand{\qdw}{w}
\newcommand{\oQuad}[3]{\mathcal{Q}_{#1}^{#2}\left[#3\right]}

%
% Thermal model:
%
%      dT
%  C * -- + (G - G_amb) * T = P
%      dt
%

% Specification
\newcommand{\system}{\mathcal{S}}

% Capacitance and conductance
\newcommand{\mC}{\m{C}}
\newcommand{\mG}{\m{G}}

%
% Transformed thermal model:
%
%  dX
%  -- = A * X + B * P
%  dt
%
%  Y = B^T * X
%
\newcommand{\vX}{\v{X}}
\newcommand{\mA}{\m{A}}
\newcommand{\mB}{\m{B}}

% Processor elements/thermal nodes mapping
\newcommand{\mM}{\m{\tilde{B}}}

% Recurrence coefficients
\newcommand{\mCF}{\m{D}}
\newcommand{\mCS}{\m{E}}

%
% Time
%
\renewcommand{\t}{t}
\newcommand{\dt}{\Delta \t}
\newcommand{\period}{T}
\newcommand{\sTime}{T}

%
% Temperature
%
\newcommand{\T}{Q}
\newcommand{\vTI}{\v{\tilde{Q}}}
\newcommand{\vTO}{\v{\T}}
\newcommand{\mTO}{\m{\T}}

\newcommand{\amb}{\text{amb}}

%
% Power
%
\renewcommand{\P}{P}
\newcommand{\vP}{\v{P}}
\newcommand{\mP}{\m{P}}

\newcommand{\dyn}{\text{dyn}}
\newcommand{\leak}{\text{leak}}
\newcommand{\stat}{\text{stat}}

\newcommand{\f}{f}

\makeatletter
\def\oPower{\@ifnextchar\bgroup{\oPowerPlus}{\oPowerZero}}
\def\oPowerPlus#1{\@ifnextchar\bgroup{\oPowerTwo{#1}}{\oPowerOne{#1}}}
\def\oPowerTwo#1#2{\Pi_{#1}\left(#2\right)}
\def\oPowerOne#1{\Pi\left(#1\right)}
\def\oPowerZero{\Pi}
\makeatother

%
% System profiles
%
\newcommand{\profile}[1]{( #1, \partition{#1} )}
\newcommand{\partition}[1]{\tau[#1]}

\makeatletter
\def\profileP{\@ifnextchar\bgroup{\profilePWithArgument}{\profilePWithoutArgument}}
\def\profilePWithArgument#1{\profile{\mP(#1)}}
\def\profilePWithoutArgument{\profile{\mP}}

\newcommand{\profilePdyn}{(\mP_\dyn, \partition{\mP_\dyn})}

\def\profileT{\@ifnextchar\bgroup{\profileTWithArgument}{\profileTWithoutArgument}}
\def\profileTWithArgument#1{\profile{\mTO(#1)}}
\def\profileTWithoutArgument{\profile{\mTO}}
\makeatother

%
% Uncertain parameters
%
\newcommand{\U}{U}
\newcommand{\vU}{\v{U}}

%
% Independent random variables
%
\newcommand{\z}{\zeta}
\newcommand{\Z}{Z}
\newcommand{\vZ}{\v{Z}}
\newcommand{\vz}{\boldsymbol{\zeta}}

\makeatletter
\def\oTransform{\@ifnextchar\bgroup{\oTransformWithArgument}{\oTransformWithoutArgument}}
\def\oTransformWithArgument#1{\mathcal{T}\left[#1\right]}
\def\oTransformWithoutArgument{\mathcal{T}}
\makeatother

%
% Process variation
%
\newcommand{\Leff}{L}
\newcommand{\vLeff}{\v{L}}
\newcommand{\nLeff}{L}
\newcommand{\gLeff}{{\delta L^{(g)}}}
\newcommand{\lLeff}{\delta L^{(l)}}
\newcommand{\vlLeff}{\delta \v{L}^{(l)}}

\renewcommand{\r}{r}
\newcommand{\vr}{\v{r}}

%
% Numbers
%
\newcommand{\nnodes}{{n_\text{n}}}
\newcommand{\nprocs}{{n_\text{p}}}
\newcommand{\nsteps}{{n_\text{t}}}

\newcommand{\nvars}{{n_\text{v}}}

\newcommand{\pcorder}{{n_\text{po}}}
\newcommand{\pcterms}{{n_\text{pt}}}

\newcommand{\qdlevel}{{n_\text{ql}}}
\newcommand{\qdorder}{{n_\text{qo}}}
\newcommand{\qdorderone}{{\tilde{n}_\text{qo}}}
\newcommand{\qdprecision}{{n_\text{qp}}}

\newcommand{\nsamples}{{n_\text{mc}}}
